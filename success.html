<!DOCTYPE html><html><head>
<title>Dashboard</title>
<meta name="viewport" content="width=device-width">
</head><body>
<!--Token appscript-->
<script>
const WEBAPP = "https://script.google.com/macros/s/AKfycbz-f-c8uD99nN7fSfcqz0a9guqmudtAbGFbbiNEcYvBjqMlysTrl63a5INsvrBGjj9y1A/exec";

(async function () {

  const params = new URLSearchParams(window.location.search);
  const token = params.get("token");

  if (!token) {
    window.location.href = "index.html";
    return;
  }

  try {

    const res = await fetch(
      WEBAPP + "?action=verify&token=" + token
    );

    const result = await res.text();

    if (result !== "OK") {
      window.location.href = "index.html";
      return;
    }

  } catch (err) {
    window.location.href = "index.html";
  }

})();
</script>


  
<h2>Welcome ðŸŽ‰</h2>
<button onclick="logout()">Logout</button>
<script src="auth.js"></script>
<script>
const token=localStorage.getItem("sessionToken");
if(!token) location.href="index.html";
fetch(API,{method:"POST",body:JSON.stringify({action:"verify",token:token})})
.then(r=>r.json())
.then(res=>{if(!res.valid){alert("Session invalid or blocked");logout();}});
</script>
</body>
</html>


</body></html>
