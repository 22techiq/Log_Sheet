<!DOCTYPE html><html><head>
<title>Dashboard</title>
<meta name="viewport" content="width=device-width">
</head><body>
<h2>Welcome ðŸŽ‰</h2>
<button onclick="logout()">Logout</button>
<script src="auth.js"></script>
<script>
const token=localStorage.getItem("sessionToken");
if(!token) location.href="index.html";
fetch(API,{method:"POST",body:JSON.stringify({action:"verify",token:token})})
.then(r=>r.json())
.then(res=>{if(!res.valid){alert("Session invalid or blocked");logout();}});
</script>
</body>
</html>
<!--Tokenize the page on landing page(This Page B)-->
<script>
(async () => {
  const token = new URLSearchParams(window.location.search).get("token");

  if (!token) {
    window.location.replace("index.html");
    return;
  }

  const res = await fetch(
    "https://script.google.com/macros/s/AKfycbzJxWnlrfW4K8mdOiSBaiuDgHepTukGaCRwYWNV1ENWIAa-iizBAhQUr8ZC8XkaMYy8/exec?action=verify&token=" + token
  );

  const result = await res.text();

  if (result === "OK") {
    document.getElementById("content").style.display = "block";
  } else {
    window.location.replace("index.html");
  }
})();
</script>

</body></html>
